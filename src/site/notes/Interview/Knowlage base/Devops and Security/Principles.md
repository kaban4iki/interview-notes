---
{"dg-publish":true,"permalink":"/interview/knowlage-base/devops-and-security/principles/"}
---

## CI/CD и пайплайны

**Кратко:**  
Continuous Integration / Continuous Delivery позволяет автоматически проверять, тестировать и развёртывать код.  
Пайплайн может включать сборку, тестирование, статический анализ, security scans, деплой в staging и production.

**Типовой вопрос:**  
Какие вы знаете стратегии деплоя?

**Ответ:**  
- **Blue-Green:** Запуск новой версии (Green) рядом со старой (Blue), затем мгновенное переключение трафика.
    
- **Canary:** Постепенное перенаправление 5-10% трафика на новую версию для проверки метрик перед полным обновлением.

---

## Infrastructure as Code (IaC)

**Кратко:**  
Позволяет описывать инфраструктуру в коде и версионировать её.  
Инструменты: Terraform, Ansible, Pulumi.  
Обеспечивает повторяемость и контроль изменений.

**Типовой вопрос:**  
Почему IaC лучше ручного конфигурирования?

**Ответ:**  
- Изменения прозрачны и версионируются  
- Легко создавать новые окружения  
- Снижается риск ошибок конфигурации

---

## Контейнеризация и оркестрация

**Кратко:**  
Контейнеры (Docker) изолируют сервисы и упрощают деплой.  
Kubernetes управляет масштабированием, отказоустойчивостью и сетевыми политиками.

**Типовой вопрос:**  
Когда стоит переходить с Docker Compose на полноценный оркестратор и почему не всегда стоит выбирать Kubernetes?

**Ответ:**  

| **Инструмент**       | **Уровень сложности** | **Масштабируемость** | **Сильные стороны**                                                   | **Когда применять**                                                   |
| -------------------- | --------------------- | -------------------- | --------------------------------------------------------------------- | --------------------------------------------------------------------- |
| **Docker Compose**   | Низкий                | Один сервер          | Простота, описание всей инфраструктуры в одном YAML                   | Локальная разработка, MVP, простые сайты на 1-5 контейнеров           |
| **Docker Swarm**     | Средний               | Несколько нод        | Нативная интеграция с Docker, встроенный Load Balancing               | Малый и средний бизнес, если нужно быстро масштабироваться без DevOps |
| **HashiCorp Nomad**  | Средний+              | Высокая              | Запускает контейнеры, бинарники и VM; очень быстрый и легкий          | Гетерогенные среды (смешанные нагрузки), если K8s кажется избыточным  |
| **Kubernetes (K8s)** | Высокий               | Огромная             | Self-healing, автоскейлинг, гигантская экосистема, стандарт в облаках | Крупные микросервисные проекты, Highload, Enterprise                  |

---

## Мониторинг и Observability

**Кратко:**  
Мониторинг отвечает на вопрос «что сломалось?» (симптомы), а Observability — «почему это случилось?» (причины). Современный стек строится на «трех китах» телеметрии: метриках (числа), логах (события) и трассировках (путь запроса).

**Типовой вопрос:**  
В чем разница между мониторингом и observability, и какие инструменты составляют стандартный LGTM-стек?

**Ответ:**  
- **Метрики (Metrics):** Агрегированные числовые данные (CPU, RPS, Error Rate).
- **Логи (Logs):** Текстовые записи о конкретных событиях.
- **Трассировки (Traces):** Отображают путь одного запроса через цепочку микросервисов.

| **Инструмент**      | **Тип данных** | **Сильные стороны**                                                                                      | **Когда выбирать**                                         |
| ------------------- | -------------- | -------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------- |
| **Prometheus**      | Метрики        | Стандарт, мощный PromQL, Pull-модель.                                                                    | Базовый мониторинг инфраструктуры.                         |
| **VictoriaMetrics** | Метрики        | В 10 раз экономнее Prometheus по RAM/Disk, быстрее на больших объемах.                                   | Когда Prometheus «захлебывается» от нагрузки.              |
| **ELK / PLG**       | Логи           | **ELK** (Elasticsearch) — мощный поиск. **Loki** (из PLG) — дешевое хранение и интеграция с Grafana.     | ELK для сложной аналитики, Loki для эффективного хранения. |
| **Jaeger / Tempo**  | Трассировки    | Jaeger — классика с UI. Tempo — решение от Grafana Labs, не требующее отдельной БД (хранит данные в S3). | Поиск задержек в микросервисах.                            |
| **Grafana**         | Визуализация   | Универсальный комбайн: объединяет данные из всех источников в один дашборд.                              | Всегда (как единое окно мониторинга).                      |

---

## Backup, Recovery и Chaos Engineering

**Кратко:**  
Backup и Recovery — процесс создания копий данных и их восстановления при сбое.
Chaos Engineering — намеренное внесение неисправностей в систему (отключение серверов, разрыв сети), чтобы убедиться, что механизмы восстановления действительно работают.

**Типовой вопрос:**  
В чем разница между RPO и RTO, и почему отсутствие проверок восстановления означает отсутствие бэкапов?

**Ответ:**  
#### 1. Метрики восстановления
- **RPO (Recovery Point Objective):** Допустимая потеря данных во времени. Если RPO = 1 час, то при сбое в 12:00 мы должны иметь копию на 11:00.
- **RTO (Recovery Time Objective):** Время простоя системы. Сколько минут/часов нужно инженерам, чтобы поднять базу после аварии.
#### 2. Виды бэкапов
- **Full:** Полная копия данных (медленно, много места).
- **Incremental:** Только изменения с момента _последнего_ бэкапа (быстро, но долго восстанавливать всю цепочку).
- **Differential:** Все изменения с момента последнего _полного_ бэкапа (баланс между скоростью и объемом).
- **PITR (Point-in-Time Recovery):** Восстановление на любой момент времени через логи транзакций (WAL в Postgres).
#### 3. Chaos Engineering
- **Цель:** Найти "бутылочные горлышки", которые не видны в обычном мониторинге.
- **Инструменты:** **Chaos Mesh** (для K8s), **Gremlin**, **LitmusChaos**.
- **Примеры:** Внезапное внесение задержки в сеть (latency injection) или принудительный "убийца процессов" (OOM killer).

